# AnimeCharaBirthday-Reminder

#### 介绍
动漫角色生日提醒系统，每日检测当日过生的角色并发送提醒到邮箱。

#### 文件说明
主要文件
- **pushmain_cloud.py** -- 执行检测并推送的主要代码实现，本地/云函数均可用
- **characters_url.json** -- 存储角色生日信息的数据文件，由本地脚本生成，也可自行填入。

次要文件
- transexcel.py -- 本地读取excel表信息和url信息并输出为json。
- temp url.txt -- 角色图片的储存位置信息，目前使用图床外链。
- requirements.txt -- python脚本的必需依赖表
- 表1.xlsx -- 角色生日信息excel表，可自行编辑。

执行脚本
- ``安装依赖.bat`` -- 一键安装依赖
- ``更新数据.bat`` -- 一键处理excel和url数据
- ``运行推送.bat`` -- 运行检测和推送

#### 安装教程

1.  clone本仓库到本地
2.  确保你已安装有python 3。双击运行 ``安装依赖.bat``
3.  打开``表1.xlsx``，根据自己的喜好进行填写。编辑表格时请不要变更首行内容。
4.  (可选)打开``temp url.txt``，填写对应角色的图片外链。如果你的外链url带有扩展名。请查看``transexcel.py``的第110进行修改。
5.  双击运行``更新数据.bat``。正常情况下，应该在本地生成一个``characters_url.json``。请打开检查有无错误。
6.  查看``pushmain_cloud.py``的第10行，配置自己的邮箱名、SMTP密码、端口等信息。
7.  双击运行``运行推送.bat``。

#### 问题解答

##### Q:为什么一键运行一闪而过消失？

A:检查你的python是否有正常安装，并查看窗口打印的日志报错。

##### Q:第七步双击运行后，没有反应？

A:确认是否有角色在当天过生，没有的话收不到邮件。可以在JSON或者表格中添加一个测试角色设置为当天生日再次运行查看邮箱情况。

##### Q:脚本是否自动每天工作？如果不是，如何设置它每天自动推送？

A:目前脚本只会运行一次。如果你是本地部署，请将脚本添加到 Windows的**计划任务**，并设置为每天触发一次。具体教程请网上搜索一下。
  如果你是云函数部署，只需要上传两个主要文件  ``pushmain_cloud.py`` ``characters_url.json`` 并设置触发器每天执行 pushmain_cloud.py 的 **main_handler** 函数即可。后续如果有角色数据更新，在本地填表后运行``运行推送.bat``并将重新生成的``characters_url.json``上传即可。


#### 其他

MIT许可。此项目也在Gitee上可用。[Soung@Gitee](https://gitee.com/soung2279)
